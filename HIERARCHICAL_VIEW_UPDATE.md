# 本地接口列表层级展示更新

## 更新内容

### 1. 层级展示结构
- 本地接口列表现在按目录结构进行分组展示
- 每个目录作为一个分组，显示该目录下的接口文件数量
- 支持展开/折叠分组查看具体接口

### 2. 批量复制功能
- 在每个分组上添加了批量复制请求代码的按钮
- 图标使用 `$(copy)` 显示在分组项的内联操作中
- 支持一键复制整个分组下所有接口的请求代码

### 3. 修改的文件

#### `src/views/local.view.ts`
- 添加了 `GroupInfo` 接口定义
- 新增 `groupsMap` 属性存储分组信息
- 修改 `initLocalFiles()` 方法支持递归处理目录结构
- 新增 `processDirectory()` 方法构建分组数据
- 修改 `getChildren()` 方法支持层级展示
- 新增 `renderGroups()` 方法渲染分组项
- 修改 `renderItem()` 方法添加 contextValue 支持
- 修改 `getParent()` 方法支持父子关系

#### `src/commands/local.cmd.ts`
- 修改 `copyGroupRequests()` 命令支持新的分组结构
- 优化错误处理和日志输出
- 支持从分组节点直接获取文件列表

#### `package.json`
- 修改菜单配置，确保批量复制按钮只在分组项上显示
- 简化了 `when` 条件，移除了不必要的上下文检查

## 使用方法

### 查看层级结构
1. 打开本地接口列表视图
2. 现在会看到按目录分组的结构
3. 点击分组前的箭头展开查看具体接口

### 批量复制请求代码
1. 在分组项上会看到复制图标 `$(copy)`
2. 点击该图标即可复制该分组下所有接口的请求代码
3. 代码会自动复制到剪贴板
4. 支持右键菜单中的批量复制选项

### 图标显示条件
- 批量复制图标只在分组项（`viewItem == group`）上显示
- 确保模板配置文件中有 `copyRequest` 函数定义

## 技术实现

### 数据结构
```typescript
interface GroupInfo {
  groupName: string    // 分组名称
  groupPath: string    // 分组路径
  files: FileHeaderInfo[]  // 分组下的文件列表
}
```

### 层级关系
- 根级：显示所有分组
- 分组级：显示分组下的接口文件
- 接口级：具体的接口文件

### 上下文值
- `group`: 分组项
- `interface`: 接口项

## 注意事项

1. 确保已安装 `rimraf` 依赖用于编译
2. 需要重新编译项目：`pnpm run compile`
3. 批量复制功能需要配置模板文件中的 `copyRequest` 函数
4. 图标显示依赖于正确的 `contextValue` 设置

## 兼容性

- 保持了与原有功能的兼容性
- 支持旧的调用方式（通过文件路径）
- 新增的分组功能不影响现有的单个文件操作